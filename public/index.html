<!DOCTYPE html>
<html>
<head>
    <meta name="google-signin-client_id" content="1045912784861-pq08ad3cuglsfta2cea54ffurpmihpr9.apps.googleusercontent.com">
    <link rel="stylesheet" href="/font-awesome-4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/proxima-nova.css">
    <link rel="stylesheet" href="/style.css">
    <script type="text/javascript" src="//connect.facebook.net/en_US/sdk.js"
            defer async></script>
    <script type="text/javascript" src="https://apis.google.com/js/platform.js"
            defer async></script>
    <script type="text/javascript" src="https://checkout.stripe.com/checkout.js"
            defer async></script>
    <script type="text/javascript" src="/marked.js"></script>
    <script type="text/javascript" src="/mustache.js"></script>
    <script type="text/javascript" src="/declare.js"></script>
    <script type="text/javascript" src="/country-codes.js"></script>
    <script type="text/javascript" src="/countries.js"></script>
    <script type="text/javascript" src="/main.js"></script>
    <script type="text/javascript" src="/pay.js"></script>
    <script type="text/javascript" src="/player.js"></script>
    <script type="text/javascript" src="/controls.js"></script>
</head>
<body>

<header>
    <div class="g-signin2 hide"></div>
    <div class="scrub" action="scrub">
        <div class="progress" role="scrub-progress"></div>
    </div>
    <div class="page width center player flex">
        <div class="push-children-right"
                id="navigation"
                template="navigation">
        </div>
        <div class="flex-strong"></div>
        <div class="controls push-children-right">
            <a href="#" class="silent" role="track-title"></a>
            <button class="faux" action="toggleShuffle" role="mode">
                <i class="fa fa-random"></i>
            </button>
            <button class="faux" action="previous" role="previous">
                <i class="fa fa-step-backward"></i>
            </button>
            <button class="faux" action="togglePlay">
                <i class="fa fa-play" role="play"></i>
            </button>
            <button class="faux" action="next" role="next">
                <i class="fa fa-step-forward"></i>
            </button>
            <button class="faux" action="toggleRepeat">
                <i class="fa fa-repeat"></i>
            </button>
        </div>
    </div>
</header>

<section role="content">
    <div class="page center width">
        Loading kitty bits... 
        <i class="fa fa-fw fa-spin fa-gear"></i>
    </div>
</section>

<footer class="page center width push-children-right">
    <label>2016 &copy; Monstercat</label>
    <a href="/help" title="Help"><i class="fa fa-question-circle"></i></a>
</footer>

<div class="toasts">
    <div role="toasts">
    </div>
</div>

<div role="modals" class="modal-layer"></div>

<script type="text/template" template-name="subscription-required-modal">
    <div class="modal">
        <h1>Sign Up!</h1>
        <p>You need a subscription to do that!</p>
        <a href="/sign-up">Sign Up Here</a> or 
        <a href="/services">Update Your Subscription</a>
        <br/>
        <button action="closeModal">Close</button>
    </div>
</script>

<script type="text/template" template-name="navigation">
    <a class="silent" href="/"><i class="fa fa-hand-peace-o fa-flip-horizontal"></i></a>
    <a class="silent" href="/music"><i class="fa fa-headphones"></i></a>
    {{#data}}
    {{#user}}
    <a class="silent" href="/playlists"><i class="fa fa-bars"></i></a>
    <a class="silent" href="/account"><i class="fa fa-gear"></i></a>
    {{/user}}
    {{^user}}
    <a class="silent" href="/signin">Sign In</a>
    {{/user}}
    {{/data}}
</script>

<script type="text/template"
        template-name="track-copycredits-modal"
        transform="loadReleaseAndTrack">
    <div class="modal">
        {{#loading}}
        ...
        {{/loading}}
        {{#err}}
        <p>Error: {{message}}</p>
        {{/err}}
        {{#data}}
        <textarea class="copycredits">{{track.copycredit}}</textarea>
        <button action="closeModal">
            <i class="fa fa-remove"></i>
        </button>
        {{/data}}
    </div>
</script>

<script type="text/template"
        template-name="release-shopping-modal">
    <div class="modal">
      <div class="modal-body">
        {{#loading}}
        ...
        {{/loading}}
        {{#err}}
        <p>Error: {{message}}</p>
        {{/err}}
        {{#data}}
        <ul>
        {{#purchaseLinks}}
          <li><a target="_blank" href="{{url}}">{{name}}</a></li>
        {{/purchaseLinks}}
        </ul>
        {{/data}}
      </div>
      <div class="modal-footer">
        <button action="closeModal">
            <i class="fa fa-remove"></i>
        </button>
      </div>
    </div>
</script>


<script type="text/template"
        route="^signin">
    <div class="page width center">
        <table class="form" data-set="credentials" trigger-target="signIn">
            <tbody>
                <tr>
                    <th>Email</th>
                    <td>
                        <input
                            type="text"
                            name="email"
                            placeholder="kitty@monstercat.com"/>
                    </td>
                </tr>
                <tr>
                    <th>Password</th>
                    <td>
                        <input
                            type="password"
                            name="password"
                            placeholder="a secret"/>
                        <button
                            class="faux"
                            action="togglePassword"
                            toggle-target="password">
                            <i class="fa fa-eye-slash"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
        <button action="signIn" trigger="signIn" data-set-target="credentials">Sign In</button>
        <button action="signInFacebook">Sign In With Facebook</button>
        <button action="signInGoogle">Sign In With Google</button>
        <br/>
        <br/>
        <a href="/forgot-password">Forgot your password?</a>
        <br/>
        <a href="/sign-up">Don't have an account? Sign up!</a>
    </div>
</script>

<script type="text/template"
        route="authenticate-token">
    <div class="page width center">
        <table class="form" data-set="auth-token">
            <tr>
                <th>Token</th>
                <td>
                    <input type="text" name="token" placeholder="Enter Here"/>
                </td>
            </tr>
        </table>
        <button action="authenticateTwoFactorToken" data-set-target="auth-token">Authorize</button>
        <button action="resendTwoFactorToken">Resend Token</button>
    </div>
</script>

<script type="text/template"
        route="^forgot-password">
    <div class="page width center">
        <table class="form" data-set="credentials">
            <tbody>
                <tr>
                    <th>Email</th>
                    <td>
                        <input
                            type="text"
                            name="email"
                            placeholder="kitty@monstercat.com"/>
                    </td>
                </tr>
            </tbody>
        </table>
        <button action="recoverPassword" data-set-target="credentials">Send Reset Link</button>
    </div>
</script>

<script type="text/template"
        route="^reset-password">
    <div class="page width center">
        <table class="form" data-set="password">
            <tbody>
                <tr>
                    <th>Password</th>
                    <td>
                        <input
                            type="password"
                            name="password"
                            placeholder="New Password"/>
                        <button
                            class="faux"
                            action="togglePassword"
                            toggle-target="password">
                            <i class="fa fa-eye-slash"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
        <button
            action="updatePassword"
            data-set-target="password">
            Update Password
        </button>
    </div>
</script>

<script type="text/template"
        route="^confirm-sign-up"
        transform="mapConfirmSignup">
    <div class="page width center">
        {{#data}}
        <h1>Confirm Sign-Up</h1>
        <table class="form" data-set="credentials" trigger-target="signUpSocial">
            <tbody>
                <tr>
                    <th>Email</th>
                    <td>
                        <input type="text"
                               name="email"
                               placeholder="kitty@monstercat.com"
                               value="{{email}}"/>
                    </td>
                </tr>
                <tr>
                    <th>Password (Optional)</th>
                    <td>
                        <input type="text"
                               name="password"
                               placeholder="a secret"/>
                        <button
                            class="faux"
                            action="togglePassword"
                            toggle-target="password">
                            <i class="fa fa-eye-slash"></i>
                        </button>
                    </td>
                </tr>
                <tr>
                    <th>Country</th>
                    <td>
                        <select name="location">
                            <option disabled selected>Select One</option>
                            {{#countries}}
                            <option value="{{name}}">
                                {{name}}
                            </option>
                            {{/countries}}
                        </select>
                    </td>
                </tr>
                <tr>
                    <th>
                        <input type="hidden" name="token" value="{{token}}"/>
                        <input type="hidden" name="submitWhere" value="{{submitWhere}}"/>
                    </th>
                </tr>
            </tbody>
        </table>
        <button action="signUpSocial" trigger="signUpSocial" data-set-target="credentials">Sign Up</button>
        {{/data}}

        {{^data}}
        <p>Nothing here.</p>
        {{/data}}
    </div>
</script>

<script type="text/template"
        route="^sign-up"
        transform="mapSignup">
    <div class="page width center">
        {{#data}}
        <table class="form" data-set="credentials" trigger-target="signUp">
            <tbody>
                <tr>
                    <th>Email</th>
                    <td>
                        <input type="text"
                               name="email"
                               placeholder="kitty@monstercat.com"/>
                    </td>
                </tr>
                <tr>
                    <th>Password</th>
                    <td>
                        <input type="text"
                               name="password"
                               placeholder="a secret"/>
                        <button
                            class="faux"
                            action="togglePassword"
                            toggle-target="password">
                            <i class="fa fa-eye-slash"></i>
                        </button>
                    </td>
                </tr>
                <tr>
                    <th>Country</th>
                    <td>
                        <select name="location">
                            <option disabled selected>Select One</option>
                            {{#countries}}
                            <option value="{{name}}">
                                {{name}}
                            </option>
                            {{/countries}}
                        </select>
                    </td>
                </tr>
            </tbody>
        </table>
        <button action="signUp" 
                trigger="signUp" 
                data-set-target="credentials">Sign Up</button>
        <button action="signUpFacebook">Sign up With Facebook</button>
        <button action="signUpGoogle">Sign up With Google</button>
        {{/data}}
    </div>
</script>

<script type="text/template"
        route="^account"
        source="$endpoint/self"
        page-title="My Account"
        transform="mapAccount">
    <div class="page width center">
        <h1>My Account</h1>
        {{#loading}}
        <i class="fa fa-fw fa-refresh fa-spin"></i>
        {{/loading}}
        {{#error}}
        <p>{{message}}</p>
        {{/error}}
        {{#data}}
        <table class="form" trigger-target="saveAccount">
            <tbody data-set="account">
                <tr>
                    <th>Email</th>
                    <td>{{email}}</td>
                </tr>
                <tr>
                    <th>Full Name</th>
                    <td><input type="text"
                                name="realName"
                                value="{{realName}}"
                                data-set-target="account"
                                initial-value="{{realName}}" />
                    </td>
                </tr>
                <tr>
                    <th>Nickname</th>
                    <td><input type="text"
                                action-enter="saveAccount"
                                name="name"
                                initial-value="{{name}}"
                                value="{{name}}" />
                    </td>
                </tr>
                <tr>
                    <th>Country</th>
                    <td>
                        <select name="location"
                                initial-value="{{location}}">
                            <option disabled>Select One</option>
                            {{#countries}}
                            <option
                                value="{{name}}"
                                {{#selected}}selected{{/selected}}>
                                {{name}}
                            </option>
                            {{/countries}}
                        </select>
                    </td>
                </tr>
                <tr>
                    <th>Change Password</th>
                    <td>
                        <input type="password"
                               name="password"
                               placeholder="New Password">
                        <button
                            class="faux"
                            action="togglePassword"
                            toggle-target="password">
                            <i class="fa fa-eye-slash"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
        <button action="saveAccount"
                trigger="saveAccount"
                data-set-target="account">
            Save
        </button>
        <button action="signOut">Sign Out</button>
        <br/>
        <br/>
        <h2>Two-Factor Auth</h2>
        {{^enableTwoFactor}}
        <button action="disableTwoFactor">Disable</button>
        {{/enableTwoFactor}}
        {{#enableTwoFactor}}
        <table class="form" data-set="2-factor">
            <tbody>
                <tr>
                    <th>Country Code</th>
                    <td>
                        <select name="countryCode">
                            <option value="" selected>Select</option>
                            {{#countries}}
                            <option value="{{dial_code}}">{{name}} ({{dial_code}})</option>
                            {{/countries}}
                        </select>
                    </td>
                </tr>
                <tr>
                    <th>Phone Number</th>
                    <td>
                        <input type="text" name="number" placeholder="Phone Number"/>
                    </td>
                </tr>
            </tbody>
        </table>
        <button action="enableTwoFactor" data-set-target="2-factor">Enable</button>
        {{/enableTwoFactor}}
        <br/>
        <br/>
        <h2>Settings</h2>
        <div source="$endpoint/self/settings"
             template="account-settings">
        </div>
        <br/>
        <a href="/services">Manage Services</a>
        {{/data}}
    </div>
</script>

<script type="text/template"
        template-name="account-settings"
        transform="transformAccountSettings">
    {{#loading}}
    <i class="fa fa-fw fa-spin fa-refresh"></i>
    {{/loading}}
    {{#error}}
    <p>{{message}}</p>
    {{/error}}
    {{#data}}
    <table class="form">
        <tbody data-set="settings">
            <tr>
                <th>Prefered Download Format</th>
                <td>
                    <select name="preferredDownloadFormat"
                            initial-value="{{preferredDownloadFormat}}">
                        {{#downloadOptions}}
                        <option value="{{value}}"
                                {{#selected}}selected{{/selected}}>
                            {{name}}
                        </option>
                        {{/downloadOptions}}
                    </select>
                    <span class="note">
                    See more about MP3 quality
                    <a href="http://wiki.hydrogenaud.io/index.php?title=LAME#Recommended_encoder_settings"
                       target="_blank">here</a>.
                    </span>
                </td>
            </tr>
            <tr>
                <th colspan="2">
                    <label>
                        <input type="checkbox"
                               name="hideNonLicensableTracks"
                               initial-value="{{hideNonLicensableTracks}}"
                            {{#hideNonLicensableTracks}}checked{{/hideNonLicensableTracks}}/>
                        Skip Non-licensable Tracks
                    </label>
                </th>
            </tr>
            <tr>
                <th colspan="2">
                    <label>
                        <input type="checkbox"
                               name="playlistPublicByDefault"
                               initial-value="{{playlistPublicByDefault}}"
                            {{#playlistPublicByDefault}}checked{{/playlistPublicByDefault}}/>
                        Make Playlists Public By Default
                    </label>
                </th>
            </tr>
        </tbody>
    </table>
    <div source="$endpoint/self/social-signins"
         template="social-settings">
    </div>
    <br/>
    <button action="saveAccountSettings"
            data-set-target="settings">
        Update Settings
    </button>
    {{/data}}
</script>

<script type="text/template"
        template-name="social-settings"
        transform="transformSocialSettings">
    {{#data}}
    {{#facebookEnabled}}
    <button action="unlinkFacebook">
        Unlink Facebook Account
    </button>
    {{/facebookEnabled}}
    {{^facebookEnabled}}
    <button action="enableFacebookSignin">
        Enable Facebook Signin
    </button>
    {{/facebookEnabled}}

    {{#googleEnabled}}
    <button action="unlinkGoogle">
        Unlink Google Account
    </button>
    {{/googleEnabled}}
    {{^googleEnabled}}
    <button action="enableGoogleSignin">
        Enable Google Signin
    </button>
    {{/googleEnabled}}
    {{/data}}
</script>

<script type="text/template"
        route="^services$"
        transform="transformServices">
    {{#data}}
    <div class="page width center">
        <h1>Manage Services</h1>
        <h2>Gold Access</h2>
        <br/>
        <p>Monstercat Gold Membership allows you to download any of the music in FLAC, MP3, and WAV formats.</p>
        <br/>
        {{#hasGoldPermanent}}
        <p>You have Gold Membership.</p>
        {{/hasGoldPermanent}}
        {{#goldUnsubscribe}}
        <label>Gold Subscription Active</label>
        <p>You are subscribed for $5.00 USD a month.</p>
        <button action="unsubscribeGold">Cancel Subscription</button>
        {{/goldUnsubscribe}}
        {{#goldSubscribe}}
        <div data-set="subscribe-gold">
            <button action="subscribeGold"
                    data-set-target="subscribe-gold">
                Subscribe for $5.00/month
            </button>
            <label>
                <input type="radio" name="payMethod" value="paypal">
                <i class="fa fa-fw fa-cc-paypal"></i>
            </label>
            <label>
                <input type="radio" name="payMethod" value="stripe" checked>
                <i class="fa fa-fw fa-cc-stripe"></i>
            </label>
        </div>
        {{/goldSubscribe}}
        <br/>
        <br/>
        <h2>Licensing Services</h2>
        <br/>
        <p>Buy a whitelisting service for use in online media for YouTube, Twitch, or Beam Pro. You can also buy a subscription and pay monthly until you pay it off.</p>
        <br/>
        <div data-set="new-license">
            <select name="vendor">
                <option value="">Select Vendor</option>
                <option value="YouTube">YouTube</option>
                <option value="Twitch">Twitch</option>
            </select>
            <input type="text" name="identity" placeholder="Identity"/>
            <label>
                <input type="radio" name="licensePayMethod" value="paypal">
                <i class="fa fa-fw fa-cc-paypal"></i>
            </label>
            <label>
                <input type="radio" name="licensePayMethod" value="stripe" checked>
                <i class="fa fa-fw fa-cc-stripe"></i>
            </label>
            <button
                action="subscribeNewLicense"
                data-set-target="new-license">
                Subscribe $5/month
            </button>
            <button
                action="buyNewLicense"
                data-set-target="new-license">
                Purchase $200
            </button>
        </div>
        <br/>
        <table>
            <thead>
                <tr>
                    <th>Vendor</th>
                    <th>Identity</th>
                    <th>Paid Off</th>
                    <th>Remaining</th>
                    <th>Monthly Cost</th>
                    <th>Active</th>
                    <th>License</th>
                    <th></th>
                </tr>
            </thead>
            <tbody source="$endpoint/self/whitelist"
                   template="whitelist-licenses"
                   role="whitelists">
            </tbody>
        </table>
    </div>
    {{/data}}
</script>

<script type="text/template" template-name="whitelist-licenses">
    {{#loading}}
    <tr><td colspan="8"><i class="fa fa-refresh fa-spin"></i></td></tr>
    {{/loading}}
    {{#error}}
    <tr><td colspan="8"><p>{{message}}</p></td></tr>
    {{/error}}
    {{#data}}
    {{#results}}
    <tr s-data-set data-set="{{_id}}">
        <td>
            <input type="hidden" name="vendor" value="{{vendor}}"/>
            {{vendor}}
        </td>
        <td>
            <input type="hidden" name="identity" value="{{identity}}"/>
            {{identity}}
        </td>
        <td>${{paid}}</td>
        <td>${{remaining}}</td>
        <td t-cost="{{monthlyCost}}">${{cost}}</td>
        <td>
            <input
                type="checkbox"
                name="activelyPaying"
                {{#activelyPaying}}checked{{/activelyPaying}}
                {{#paid}}disabled{{/paid}}/>
        </td>
        <td>
            {{#licenseUrl}}
            <a href="{{licenseUrl}}" title="Open license document.">View</a>
            {{/licenseUrl}}
        </td>
        <td>
            {{^paid}}
            <button action="buyOutLicense"
                    data-set-target="{{_id}}">Buy Out</button>
            {{/paid}}
        </td>
    </tr>
    {{/results}}
    {{^results}}
    <tr><td colspan="8">You have no licenses.</td></tr>
    {{/results}}
    {{/data}}
</script>

<script type="text/template" route="^buy-license" transform="transformBuyOut">
    <div class="page center width">
        <h1>Purchase Whitelist License</h1>
        <p>Buy purchasing a license you will be whitelisted on the desired service under by the identity chosen.</p>
        <table class="form">
            <tbody>
                <tr>
                    <th>Vendor</th>
                    <td>{{vendor}}</td>
                </tr>
                <tr>
                    <th>Identity</th>
                    <td>{{identity}}</td>
                </tr>
                <tr>
                    <th>Total Cost</th>
                    <td>$--.--</td>
                </tr>
            </tbody>
        </table>
        <button>Purchase License</button>
    </div>
</script>

<script type="text/template" route="^billing$">
    <div class="page width center">
        <h1>Billing History</h1>
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Amount</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr><td colspan="3">No history.</td></tr>
            </tbody>
        </table>
    </div>
</script>

<script type="text/template"
        route="^music(\?.*)?"
        page-title="Music"
        completed="completedMusic"
        transform="transformMusic">
    {{#data}}
    <div class="page width center">
        <div class="filters pad-vertical push-children-right"
             trigger-target="searchMusic"
             data-set="music-search">
            <input class="round"
                    data-set-target="music-search"
                    name="search"
                    type="text"
                    placeholder="Search..."
                    value="{{search}}"/>
            <button action="hitSelect" class="select">
                <select name="type">
                    <option value="">Show All Types</option>
                    {{#types}}
                    <option value="{{value}}" {{#selected}}selected{{/selected}}>
                        {{name}}
                    </option>
                    {{/types}}
                </select>
            </button>
            <button action="searchMusic" 
                    trigger="searchMusic" 
                    data-set-target="music-search">
                <i class="fa fa-search"></i>
            </button>
        </div>
    </div>
    <div source="$endpoint/catalog/release?{{query}}"
            template="music-releases">
    </div>
    {{/data}}
</script>

<script type="text/template"
        template-name="music-releases"
        transform="transformMusicReleases">
    {{#loading}}
    <div class="page width center">
        <i class="fa fa-fw fa-spin fa-refresh"></i>
    </div>
    {{/loading}}
    {{#error}}
    <div class="page width center">
        <p>{{message}}</p>
    </div>
    {{/error}}
    {{#data}}
    <ul class="page width center art-list">
        {{#results}}
        <li>
            <a class="silent" href="/release/{{_id}}" title="{{title}} / {{artists}}">
                <img src="{{cover}}"/>
                <label class="title one-line-ellipsis">{{title}}</label>
                <br/>
                <label class="artist one-line-ellipsis">{{artists}}</label>
            </a>
        </li>
        {{/results}}
    </ul>
    {{^total}}
    <div class="page width center text center">No results found.</div>
    {{/total}}
    {{#total}}
      <div class="page width center pagination pad-vertical text center">
          {{#previous}}
            <a href="?{{previous}}">Previous</a>
          {{/previous}}
          <label>{{skip}} - {{count}} of {{total}}</label>
          {{#next}}
            <a href="?{{next}}">Next</a>
          {{/next}}
      </div>
    {{/total}}
    {{/data}}
</script>

<script type="text/template"
        route="^release\/(.*)"
        source="$endpoint/catalog/release/$1"
        transform="mapRelease"
        completed="completedRelease">
    {{#loading}}
    <i class="fa fa-spin fa-refresh"></i>
    {{/loading}}
    {{#error}}
    <p>{{message}}</p>
    {{/error}}
    {{#data}}
    <div class="bgbox" style="background-image: url('{{coverBig}}')">
        <div class="bgbox-blanket cl-white">
            <div class="details-box page width center clearfix">
                <img class="artwork" src="{{cover}}"/>
                <h1 release-id="{{_id}}">{{title}}</h1>
                <h2>{{artists}}</h2>
                <label>Released {{releaseDate}}</label>
                <div class="options push-children-right">
                    {{#purchase}}
                    <button class="faux" action="openPurchaseRelease">
                        <i class="fa fa-shopping-bag"></i>
                    </button>
                    {{/purchase}}
                    {{#share}}
                    <a class="silent" href="{{share}}" target="_blank">
                        <i class="fa fa-spotify"></i>
                    </a>
                    {{/share}}
                    <a class="silent"
                    href="{{downloadLink}}"
                    target="_blank"
                    action="canAccessGold">
                        <i class="fa fa-cloud-download"></i>
                    </a>
                    <button class="faux"
                            action="playSongs"
                            role="play-release"
                            release-id="{{_id}}">
                        <i class="fa fa-play inactive"></i>
                        <i class="fa fa-pause active"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="release page width center" >
        <div
            source="$endpoint/catalog/release/{{_id}}/tracks"
            template="release-tracks">
        </div>
    </div>
    {{/data}}
</script>

<script type="text/template"
        mustache-name="unlicensable">
{{^licensable}}<div class="unlicensable">This track can't be licensed. <a href="#">Read more</a></div>{{/licensable}}
</script>

<script type="text/template"
        mustache-name="trackCells">
<td>{{title}}{{>unlicensable}}</td>
{{#playlistId}}
<td><a href="/release/{{releaseId}}">{{release}}</a></td>
{{/playlistId}}
<td>
    {{^artists}}
    -
    {{/artists}}
    {{#artists}}
    <a href="/artist/{{_id}}">{{name}}</a>
    {{/artists}}
</td>
<td>{{genre}}</td>
<td>{{bpm}}</td>
</script>

<script type="text/template"
        mustache-name="playSong">
<button class="faux"
        action="playSong"
        role="play-song"
        play-link="{{playUrl}}"
        title="{{title}}"
        index="{{index}}"
        {{#playlistId}}playlist-id="{{playlistId}}"{{/playlistId}}
        {{^playlistId}}release-id="{{releaseId}}"{{/playlistId}}>
    <i class="fa fa-play-circle inactive"></i>
    <i class="fa fa-pause-circle active"></i>
</button>
</script>

<script type="text/template"
        mustache-name="trackButtons">
<a class="silent"
   target="_blank"
   title="Download Track"
   action="canAccessGold"
   href="{{downloadLink}}">
    <i class="fa fa-cloud-download"></i>
</a>
<button
    class="faux"
    action="openTrackCopyCredits"
    release-id="{{releaseId}}"
    track-id="{{_id}}">
    <i class="fa fa-copyright"></i>
</button>
</script>

<script type="text/template"
        template-name="release-tracks"
        transform="transformReleaseTracks"
        completed="completedReleaseTracks">
    <table>
        <thead>
            <tr>
                <th class="shrink">#</th>
                <th class="shrink nohpad"></th>
                <th>Title</th>
                <th>Artists</th>
                <th>Genre</th>
                <th>BPM</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {{#loading}}
            <tr><td colspan="5"><i class="fa fa-spin fa-refresh"></i></td></tr>
            {{/loading}}
            {{#error}}
            <tr><td colspan="5"><p>{{message}}</p></td></tr>
            {{/error}}
            {{#data}}
            {{#results}}
            <tr>
                <td class="shrink">{{trackNumber}}.</td>
                <td class="shrink nohpad">
                  {{>playSong}}
                </td>
                {{>trackCells}}
                <td class="push-children-right">
                    {{>trackButtons}}
                    {{#canPlaylist}}
                    <select
                        onchange="addToPlaylist(null, this)"
                        source="$endpoint/playlist"
                        template="select-playlist"
                        track-id="{{_id}}">
                    </select>
                    {{/canPlaylist}}
                </td>
            </tr>
            {{/results}}
            {{/data}}
        </tbody>
    </table>
</script>

<script type="text/template"
        route="^artist\/(.*)"
        completed="completedArtist"
        source="$endpoint/catalog/artist/$1?fields=name,websiteDetailsId">
        {{#data}}
        {{#websiteDetailsId}}
        <div source="$endpoint/website/{{websiteDetailsId}}"
             template="user-details">
        </div>
        {{/websiteDetailsId}}
        <div class="page center width">
            {{^websiteDetailsId}}
            <br/>
            <h2>About</h2>
            <p>There are no details.</p>
            <br/>
            {{/websiteDetailsId}}
            <br/>
            <br/>
            <h2>Discography</h2>
            <br/>
            <div source="$endpoint/catalog/artist/{{_id}}/releases"
                 template="user-releases">
            </div>
        </div>
        {{/data}}
</script>

<script type="text/template"
        template-name="user-releases"
        transform="transformReleases">
    {{#loading}}
    <i class="fa fa-fw fa-spin fa-refresh"></i>
    {{/loading}}
    {{#error}}
    <p>{{message}}</p>
    {{/error}}
    {{#data}}
    <ul class="discography">
        {{#results}}
        <li>
            <a href="/release/{{_id}}">
                <img src="{{cover}}">
            </a>
        </li>
        {{/results}}
    </ul>
    {{/data}}
</script>

<script type="text/template"
        template-name="user-details"
        transform="mapWebsiteDetails"
        completed="completedWebsiteDetails">
    {{#loading}}
    <i class="fa fa-fw fa-spin fa-refresh"></i>
    {{/loading}}
    {{#error}}
    <p>{{message}}</p>
    {{/error}}
    {{#data}}
    <div class="bgbox" style="background-image: url('{{image}}')">
        <div class="bgbox-blanket cl-white">
            <div class="details-box page width center clearfix">
                {{#image}}
                <img class="artwork" src="{{image}}"/>
                {{/image}}
                <h1>{{name}}</h1>
                <div class="options push-children-right">
                    {{#socials}}
                    <a href="{{link}}" target="_blank"><i class="fa fa-{{icon}}"></i></a>
                    {{/socials}}
                </div>
            </div>
        </div>
    </div>
    <div class="page width center">
        {{#about}}
        <br/>
        <h2>About</h2>
        <p>{{about}}</p>
        {{/about}}
        {{#contact}}
        <br/>
        <h2>Booking & Managment</h2>
        <br/>
        <p>{{booking}}</p>
        <br/>
        <p>{{management}}</p>
        {{/contact}}
    </div>
    {{/data}}
</script>

<script type="text/template">
    {{#loading}}
    <li><i class="fa fa-fw fa-spin fa-refresh"></li>
    {{/loading}}
    {{#error}}
    <li>{{message}}</li>
    {{/error}}
    {{#data}}
    {{#results}}
    <li>
        <img src="{{cover}}"/>
        <label>{{title}}</label>
    </li>
    {{/results}}
    {{/data}}
</script>

<script type="text/template"
        template-name="select-playlist">
    {{#loading}}
    <option disabled checked>Loading...</option>
    {{/loading}}
    {{#error}}
    {{/error}}
    {{#data}}
    <option value="" checked>Add to Playlist</option>
    {{#results}}
    <option value="{{_id}}">{{name}}</option>
    {{/results}}
    {{/data}}
</script>

<script type="text/template"
        page-title="My Playlists"
        route="^playlists">
    <div class="page width center">
        <h1>My Playlists</h1>
        <button action="createPlaylist">
            Create Playlist
        </button>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th></th>
                </tr>
            </thead>
            <tbody
                source="$endpoint/playlist?fields=name,public"
                template="playlists">
            </tbody>
        </table>
    </div>
</script>

<script type="text/template"
        template-name="playlists">
    {{#loading}}
    <tr><td colspan="2"><i class="fa fa-fw fa-refresh fa-spin"></i></td></tr>
    {{/loading}}
    {{#error}}
    <tr><td colspan="2">{{message}}</td></tr>
    {{/error}}
    {{#data}}
    {{#results}}
    <tr>
        <td><a href="/playlist/{{_id}}">{{name}}</a></td>
        <td class="push-children-right">
            <button class="faux"
                    action="renamePlaylist"
                    playlist-id="{{_id}}">
                <i class="fa fa-pencil"></i>
            </button>
            <button class="faux"
                    action="destroyPlaylist"
                    playlist-id="{{_id}}">
                <i class="fa fa-trash-o"></i>
            </button>
        </td>
    </tr>
    {{/results}}
    {{^results}}
    <tr><td colspan="2">No Results.</td></tr>
    {{/results}}
    {{/data}}
</script>

<script type="text/template"
        route="^playlist\/(.*)"
        source="$endpoint/playlist/$1?fields=name,public,tracks,userId"
        completed="completedPlaylist"
        transform="transformPlaylist">
    <div class="page width center">
        {{#loading}}
        <i class="fa fa-fw fa-spin fa-refresh"></i>
        {{/loading}}
        {{#error}}
        <p>{{message}}</p>
        {{/error}}
        {{#data}}
        <h1 playlist-id="{{_id}}">{{name}}</h1>
        <div class="options pad-vertical push-children-right">
            {{#canPublic}}
            <label>
                <input
                    type="checkbox"
                    action="togglePlaylistPublic"
                    playlist-id="{{_id}}"
                    {{#public}}checked{{/public}} />
                Public
            </label>
            {{/canPublic}}
            <button action="reorderPlaylistFromInputs" 
                    trigger="reorderPlaylistFromInputs">
                    <i class="fa fa-fw fa-save" role="save-playlist-order"></i> 
                    Save Order</button>
            <button><i class="fa fa-fw fa-cloud-download"></i></button>
            {{#downloadUrl}}
            <a class="silent"
               title="Download Playlist"
               action="canAccessGold"
               href="{{downloadUrl}}"><i class="fa fa-fw fa-cloud-download"></i></a>
            {{/downloadUrl}}
            <button class="faux">
                <i class="fa fa-fw fa-play"
                   action="playSongs"
                   role="play-playlist"></i>
            </button>
        </div>
        <table class="drag-sortable">
            <thead>
                <tr>
                    <th>#</th>
                    <th class="shrink nohpad"></th>
                    <th>Title</th>
                    <th>Release</th>
                    <th>Artist</th>
                    <th>Genre</th>
                    <th>BPM</th>
                    <th></th>
                </tr>
            </thead>
            <tbody role="playlist-tracks" source="$endpoint/playlist/{{_id}}/tracks"
                   template="playlist-tracks">
            </tbody>
        </table>
        {{/data}}
    </div>
</script>

<script type="text/template"
        template-name="playlist-tracks"
        transform="transformPlaylistTracks"
        completed="updateControls">
    {{#loading}}
    <tr><td colspan="6"><i class="fa fa-fw fa-spin fa-refresh"></i></td></tr>
    {{/loading}}
    {{#error}}
    <tr><td colspan="6">{{message}}</td></tr>
    {{/error}}
    {{#data}}
    {{#results}}
    <tr role="playlist-track"
        track-id="{{_id}}"
        release-id="{{releaseId}}"
        {{#edit}}
        draggable="true"
        ondrop="playlistDrop(event)"
        ondragover="playlistAllowDrop(event)"
        ondragleave="playlistDragLeave(event)"
        ondragstart="playlistDragStart(event, '{{_id}}', '{{releaseId}}')"
        {{/edit}}>
        <td>
            {{#edit}}
            <input  type="text"
                    action-enter="reorderPlaylistFromInputs"
                    action-enter="reorderPlaylistFromInputs"
                    onfocus="playlistTrackOrderFocus(event, this)"
                    onblur="playlistTrackOrderBlur(event, this)"
                    trigger-target="reorderPlaylistFromInputs"
                    track-id="{{_id}}"
                    release-id="{{releaseId}}"
                    track-title="{{title}}"
                    name="trackOrder[]"
                    tabIndex="{{trackNumber}}"
                    value="{{trackNumber}}" size="2" />
            {{/edit}}
            {{#noEdit}}
            {{trackNumber}}.
            {{/noEdit}}
        </td>
        <td class="shrink nohpad">
          {{>playSong}}
        </td>
        {{>trackCells}}
        <td class="push-children-right">
            {{>trackButtons}}
            {{#edit}}
            <button class="faux"
                    action="removeFromPlaylist"
                    playlist-position="{{index}}">
                <i class="fa fa-trash-o"></i>
            </button>
            {{/edit}}
        </td>
    </tr>
    {{/results}}
    {{^results}}
    <tr>
        <td colspan="6">No Results.</td>
    </tr>
    {{/results}}
    {{/data}}
</script>

<script type="text/template" template-name="404">
    <div class="page width center">
        <h1>Page Not Found</h1>
        <p>The page you are looking for is not here.</p>
    </div>
</script>

<script type="text/template"
        route="^help\/?$">
    <div class="page width center">
        <h1>Help</h1>
        <p>
        Have a question about this platform? <a href="/faqs">Check our FAQs.</a><br/>
        Need an answer about the Whitelist License? <a href="/faqs/whitelisting">See here.</a><br/>
        <a href="/twitch-policy">Twitch Policy</a><br/>
        <a href="/privacy-policy">Privacy Policy</a><br/>
        <a href="/terms-of-service">Terms of Service</a>
        </p>
    </div>
</script>

<script type="text/template"
        mustache-name="markdown-basic">
    <div class="page width center">
        {{#loading}}
        <i class="fa fa-fw fa-spin fa-refresh"></i>
        {{/loading}}
        {{#error}}
        <p>{{message}}</p>
        {{/error}}
        {{#data}}
        {{{data}}}
        {{/data}}
    </div>
</script>

<script type="text/template"
        route="^faqs\/?$"
        transform="transformMarkdown"
        source="https://raw.githubusercontent.com/monstercat/docs/master/connect/FAQ/README.md">
    {{>markdown-basic}}
</script>

<script type="text/template"
        route="^faqs\/whitelisting\/?$"
        transform="transformMarkdown"
        source="https://raw.githubusercontent.com/monstercat/docs/master/connect/FAQ/Licensing%20%26%20Whitelist.md">
    {{>markdown-basic}}
</script>

<script type="text/template"
        route="^twitch-policy\/?$"
        transform="transformMarkdown"
        source="https://raw.githubusercontent.com/monstercat/docs/master/Twitch%20Policy.md">
    {{>markdown-basic}}
</script>

<script type="text/template"
        route="^privacy-policy\/?$"
        transform="transformMarkdown"
        source="https://raw.githubusercontent.com/monstercat/docs/master/connect/Privacy%20Policy.md">
    {{>markdown-basic}}
</script>

<script type="text/template"
        route="^terms-of-service\/?$"
        transform="transformMarkdown"
        source="https://raw.githubusercontent.com/monstercat/docs/master/connect/Terms%20of%20Service.md">
    {{>markdown-basic}}
</script>

<script type="text/template" template-name="toast">
    <div class="toast{{#error}} error{{/error}}" >
        <p>{{message}}</p>
    </div>
</script>

</body>
</html>
